(async()=>{let[t,e]=Array.from(document.querySelector("table tbody").children).slice(3,5).map((t=>t.lastElementChild.textContent.trim()));t=t.split("/").shift(),e=e.toLowerCase().includes("am")?"1":"2";let n,s=t+"s"+e,o={"27s1":"https://json.extendsclass.com/bin/ad0b26002978","27s2":"https://json.extendsclass.com/bin/fefdb99829ed","29s1":"https://json.extendsclass.com/bin/904f0d88131c","29s2":"https://json.extendsclass.com/bin/46c43bba08a8","30s1":"https://json.extendsclass.com/bin/81f6b0ed9c31","30s2":"https://json.extendsclass.com/bin/ef17bbd48072","31s1":"https://json.extendsclass.com/bin/4c2836982021","31s2":"https://json.extendsclass.com/bin/a6a0bd4c830b","09s1":"https://json.extendsclass.com/bin/70d730a21c8f","01s2":"https://json.extendsclass.com/bin/d2ba75006751","1s1":"https://json.extendsclass.com/bin/2902b9729668","1s2":"https://json.extendsclass.com/bin/d2ba75006751"};try{n=await fetch(o[s]),n=await n.json()}catch(t){console.error(t),console.error("FAILED to fetch answer keys. Most probably because keys are yet to be uploaded.")}let c=[];for(let t of document.querySelectorAll("table.menu-tbl > tbody")){let e=t.children,s=Array.from(e).map((t=>t.lastChild.textContent.trim())),o="MCQ"===s[0],l=t.parentNode.parentElement.firstChild.firstChild.lastChild.lastChild.textContent.trim();l=o?"Not Answered"===s[6]?null:s.slice(2,6)[parseInt(s[7])-1]:"Not Answered"===s[2]?null:l,c.push({type:s[0],id:s[1],opts:o?s.slice(2,6):[],marked:l,score:n[s[1]]===l?4:l?-1:0})}let l=0,a=0,r=0,d=0,[i,b]=y("MAT",0),[m,p]=y("PHY",30),[h,f]=y("CHE",60),u=i+m+h,x=[b,p,f].join("\n\n");function y(t,e){let n=0,s=t;return c.slice(e,e+30).forEach((({score:t},o)=>{n+=t,o%10==0&&(s+="\n"),s+=function(t,e,n){let s=`${t<10?"0":""}${t+1}${e}`;for(;s.length<n;)s+=" ";return s}(o+e,function(t){switch(l++,t){case 4:return r++,"✅";case-1:return d++,"❌";case 0:return l--,a++,"❔"}}(t),5)})),[n,s]}let C=`\n${s}\nTOTAL: ${u}/300\n\nCorrect: ${r}\nIncorrect: ${d}\nAttempted: ${l}\nUnattempted: ${a}\n\nPhysics: ${m}/100\nChemistry: ${h}/100\nMaths: ${i}/100\n\n${x}`,j=document.createElement("div");j.style="background: black; color: white; padding: 1rem; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 3px 3px 10px #00000055;";let w=document.createElement("pre");w.style="font-family: sans-serif;",w.textContent=C;let $=document.createElement("button");$.addEventListener("click",(t=>{window.navigator.clipboard.writeText(C),t.target.textContent="copied"})),$.style="width: fit-content; display: block; margin: 1rem 0 0 auto;",$.textContent="COPY",j.append(w,$),document.body.appendChild(j)})();
